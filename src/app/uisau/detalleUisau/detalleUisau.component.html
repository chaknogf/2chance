<div class="d-flex-desktop">
  <section class="search-container rounded col-md-3 svg-container" [ngClass]="{'femenino': consulta?.sexo === 'F', 'masculino': consulta?.sexo !== 'F'}">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <backIcon (click)="regresar()" />
      <button class="btn btn-outline-light btn-sm p-1">
        <i class="bi bi-pencil-square"></i>
      </button>
      <p class="mb-0 fw-bold">{{ consulta?.id }}</p>
      <newIcon class="btn search-btn" [routerLink]="['/formUisau/new/', consulta?.id]"  />

    </div>

    <!-- Información del paciente -->
    <button class="btn btn-primary d-md-none mb-2" (click)="mostrarInfo = !mostrarInfo">
      {{ mostrarInfo ? 'Ocultar Información' : 'Mostrar Información' }}
    </button>

    <div class="row row-cols-2 g-1" *ngIf="mostrarInfo || isDesktop">
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Expediente</p>
        <p class="mb-0 text-muted">{{ consulta?.expediente }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Hoja Emergencia</p>
        <p class="mb-0 text-muted">{{ consulta?.hoja_emergencia }}</p>
      </div>
      <div class="col-12 border-bottom pb-1">
        <p class="fw-bold mb-1">Nombre del paciente</p>
        <p class="mb-0 text-muted">{{ consulta?.nombres | capitalizeName }} {{ consulta?.apellidos | capitalizeName }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Sexo</p>
        <p class="mb-0 text-muted">{{ consulta?.sexo | sexo }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Nacimiento</p>
        <p class="mb-0 text-muted">{{ consulta?.nacimiento | formatoFecha }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Edad</p>
        <p class="mb-0 text-muted">{{ consulta?.nacimiento | edad }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Ocupación</p>
        <p class="mb-0 text-muted">{{ paciente?.ocupacion }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Nivel Académico</p>
        <p class="mb-0 text-muted">{{ paciente?.educacion | enumEducacion }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Estado Civil</p>
        <p class="mb-0 text-muted">{{ paciente?.estado_civil | enumCivil }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Nacionalidad</p>
        <p class="mb-0 text-muted">{{ paciente?.nacionalidad | anyToNumber | enumNacion }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Teléfono</p>
        <p class="mb-0 text-muted" *ngIf="editContact == false">{{ paciente?.telefono }}</p>
        <!-- <div class="input-group" *ngIf="editContact == true">
          <input  type="text" class="custom-input" id="telefono" name="telefono" [(ngModel)]="p.telefono" placeholder="telefono" autofocus>
          <button class="btn btn-primary" (click)="editarTelefono()">Guardar</button>
        </div>
        <editIcon (click)="updateTel()" /> -->
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Teléfono Familiar</p>
        <p class="mb-0 text-muted">{{ paciente?.telefono_responsable }}</p>
      </div>
      <div class="col-12 text-center fw-bold border-bottom pb-1">- Datos de Contacto -</div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Padre</p>
        <p class="mb-0 text-muted">{{ paciente?.padre | anyToText | capitalizeName }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Madre</p>
        <p class="mb-0 text-muted">{{ paciente?.madre | anyToText | capitalizeName }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Responsable</p>
        <p class="mb-0 text-muted">{{ paciente?.responsable | anyToText | capitalizeName }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Parentesco</p>
        <p class="mb-0 text-muted">{{ paciente?.parentesco | enumParentesco }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Fecha Consulta</p>
        <p class="mb-0 text-muted">{{ consulta?.fecha_consulta | formatoFecha }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Tipo Consulta</p>
        <p class="mb-0 text-muted">{{ consulta?.tipo_consulta | enumTipo }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Especialidad</p>
        <p class="mb-0 text-muted">{{ consulta?.especialidad | enumEspecialidad }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Servicio</p>
        <p class="mb-0 text-muted">{{ consulta?.servicio | enumEspecialidad }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Creado por</p>
        <p class="mb-0 text-muted">{{ consulta?.created_by }}</p>
      </div>
      <div class="col border-bottom pb-1">
        <p class="fw-bold mb-1">Creado</p>
        <p class="mb-0 text-muted">{{ consulta?.created_at }}</p>
      </div>




    </div>

  </section>
  <section class="search-container rounded-b-full col-md-9 svg-container-mini" >
    <div *ngFor="let item of resumen" class="mb-3 border-bottom pb-3">
      <div class="div-search w-100">
        <div class="div-btn-icons justify-content-between" (click)="handleMostrarData(item.id)">
          <ng-container class="text-start" >
            <div ><contactarIcon [routerLink]="['/informa/edit/', item.id]" /> Informar</div>
            <div *ngIf="item.informacion == 'SI'"><gestionIcon  />  {{ item.id }}</div>
            <div> <calendarIcon /> {{item.fecha | anyToText | FormatoFechaCompleta}}</div>
            <div> <timeIcon class="text-info" /> {{item.hora}}</div>
            <div> <userFluentIcon  />  {{item.created_by}}</div>
          </ng-container>
        </div>

        <div class="d-flex flex-wrap gap-3">
          <!-- Primera tarjeta -->
          <div class="col-md-4 mb-3" *ngIf="item.informacion">
            <div class="card">
              <div class="card-header">
                Información
              </div>
              <div class="card-body">
                <div >
                  <p>Se informo:
                    <span class="badge bg-light rrounded" *ngIf="item.informacion == 'NO'">{{item.informacion}}</span>
                    <span class="badge bg-light rrounded" *ngIf="item.informacion == 'NR'">No Responde</span>
                    <span class="badge bg-light rrounded" *ngIf="item.informacion == 'NE'">No Esta</span>
                    <span class="badge bg-light rrounded" *ngIf="item.informacion == 'TI'">Telefono Incorrecto</span>
                    <span class="badge bg-light rrounded" *ngIf="item.informacion == 'SP'">Si Presencial <personTalkIcon /></span>
                    <span class="badge bg-light rrounded" *ngIf="item.informacion == 'ST'">Si Telefonico <telefonoColorIcon /></span>
                  </p>
                </div>
                <p *ngIf="item.contacto">Contacto: <span class="badge bg-light rrounded">{{item.contacto}}</span></p>
                <p *ngIf="item.parentesco">Parentesco: <span class="badge bg-light rrounded">{{item.parentesco | anyToNumber | enumParentesco}}</span></p>
              </div>
            </div>
          </div>

          <!-- Segunda tarjeta -->
          <div class="col-md-4 mb-3" *gfif="item.fecha_contacto">
            <div class="card">
              <div class="card-header">
                Detalles
              </div>
              <div class="card-body">
                <p *ngIf="item.telefono">Telefono: <span class="badge bg-light rrounded">{{item.telefono}}</span></p>
                <p *ngIf="item.fecha_contacto">
                  Fecha y Hora de la Información:
                  <span class="badge bg-light rrounded text-break line-break">
                    {{item.fecha_contacto | anyToText | FormatoFechaCompleta}} {{item.hora_contacto}}
                  </span>
                </p>
                <p *ngIf="item.update_by">Quien informo: <span class="badge bg-light rrounded">{{item.update_by}}</span></p>
              </div>
            </div>
          </div>

          <!-- Tercera tarjeta -->
          <div class="col-md-4 mb-3" *ngIf="item.estado || item.situacion || item.estadia || item.cama">
            <div class="card">
              <div class="card-header">
                Estado y Situación
              </div>
              <div class="card-body">
                <p *ngIf="item.estado">Estado: <span class="badge bg-light rrounded">{{item.estado | anyToNumber | enumEstado}}</span></p>
                <p *ngIf="item.situacion">Situación: <span class="badge bg-light rrounded">{{item.situacion | anyToNumber | enumSituacion}}</span></p>
                <p *ngIf="item.estadia">Estadia: <span class="badge bg-light rrounded">{{item.estadia | anyToNumber | enumEstadia}}</span></p>
                <p *ngIf="item.cama">Cama: <span class="badge bg-light rrounded">{{item.cama}}</span></p>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <!-- Cuarta tarjeta -->
          <div class="col-md-4 mb-3" *ngIf="item.lugar_referencia || item.fecha_referencia">
            <div class="card">
              <div class="card-header">
                Referencia
              </div>
              <div class="card-body">
                <p *ngIf="item.lugar_referencia">Lugar de Referencia: <span class="badge bg-light rrounded">{{item.lugar_referencia | anyToNumber | enumReferencia}}</span></p>
                <p *ngIf="item.fecha_referencia">Fecha de Referencia: <span class="badge bg-light rrounded">{{item.fecha_referencia | anyToText | formatoFecha}}</span></p>
              </div>
            </div>
          </div>

          <!-- Quinta tarjeta -->
          <div class="col-md-4 mb-3" *ngIf="item.servicio || item.especialidad ">
            <div class="card">
              <div class="card-header">
                Servicios y Especialidades
              </div>
              <div class="card-body">
                <p *ngIf="item.servicio">Servicio: <span class="badge bg-light rrounded">{{item.servicio | anyToNumber | enumServicios}}</span></p>
                <p *ngIf="item.especialidad">Especialidad: <span class="badge bg-light rrounded">{{item.especialidad | anyToNumber | enumEspecialidad}}</span></p>
              </div>
            </div>
          </div>

          <!-- Sexta tarjeta -->
          <div class="col-md-4 mb-3" *ngIf="item.evolucion || item.estudios || item.dxA || item.dxB || item.dxC || item.dxD || item.dxE">
            <div class="card">
              <div class="card-header">
                Diagnósticos
              </div>
              <div class="card-body">
                <p *ngIf="item.evolucion">Evolución: <span class="badge bg-light rrounded">{{item.evolucion}}</span></p>
                <p *ngIf="item.estudios">Estudios: <span class="badge bg-light rrounded">{{item.estudios}}</span></p>
                <div *ngIf="item.dxA || item.dxB || item.dxC || item.dxD || item.dxE">
                  Diagnóstico:
                  <span class="badge bg-light rrounded" *ngIf="item.dxA">{{item.dxA}}</span>
                  <span class="badge bg-light rrounded" *ngIf="item.dxB">{{item.dxB}}</span>
                  <span class="badge bg-light rrounded" *ngIf="item.dxC">{{item.dxC}}</span>
                  <span class="badge bg-light rrounded" *ngIf="item.dxD">{{item.dxD}}</span>
                  <span class="badge bg-light rrounded" *ngIf="item.dxE">{{item.dxE}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="d-flex flex-wrap gap-3">
          <!-- Séptima tarjeta -->
          <div class="col-md-4 mb-3" *ngIf="item.nota || item.receta">
            <div class="card">
              <div class="card-header">
                Receta
              </div>
              <div class="card-body">
                <p *ngIf="item.nota">Receta: <span class="badge bg-light rrounded">{{item.receta}}</span></p>
              </div>
              <div class="card-header">
                Nota
              </div>
              <div class="card-body">
                <p *ngIf="item.nota">Nota: <span class="badge bg-light rrounded">{{item.nota}}</span></p>
              </div>
            </div>
          </div>

          <!-- Octava tarjeta -->
          <div class="col-md-4 mb-3" *ngIf="item.shampoo || item.toalla || item.peine || item.jabon || item.cepillo_dientes || item.pasta_dental || item.sandalias || item.agua || item.papel || item.panal_bebe || item.panal_adulto || item.toalla_humeda || item.ropa_interior || item.babero || item.otros">
            <div class="card">
              <div class="card-header">
                Artículos
              </div>
              <div class="card-body">
                <p *ngIf="item.shampoo">Shampoo</p>
                <p *ngIf="item.toalla">Toalla</p>
                <p *ngIf="item.peine">Peine</p>
                <p *ngIf="item.jabon">Jabón</p>
                <p *ngIf="item.cepillo_dientes">Cepillo de dientes</p>
                <p *ngIf="item.pasta_dental">Pasta dental</p>
                <p *ngIf="item.sandalias">Sandalias</p>
                <p *ngIf="item.agua">Agua</p>
                <p *ngIf="item.papel">Papel</p>
                <p *ngIf="item.panal_bebe">Pañales de bebe</p>
                <p *ngIf="item.panal_adulto">Pañales de adulto</p>
                <p *ngIf="item.toalla_humeda">Toalla humeda</p>
                <p *ngIf="item.ropa_interior">Ropa interior</p>
                <p *ngIf="item.babero">Babero</p>
                <p *ngIf="item.otros">Otros especificados en notas</p>
              </div>
            </div>
          </div>
        </div>


      </div>



    </div>

    <!-- Paginación -->
    <div class="d-flex justify-content-center mt-3">
      <div class="btn-group">
        <button type="button" class="btn btn-outline-light" (click)="onPageChange(1)" [disabled]="paginaActual === 1">Primera</button>
        <button type="button" class="btn btn-outline-light" (click)="onPageChange(paginaActual - 1)" [disabled]="paginaActual === 1">Anterior</button>
        <button type="button" class="btn btn-outline-light" (click)="onPageChange(paginaActual + 1)" [disabled]="paginaActual === totalPaginas()">Siguiente</button>
        <button type="button" class="btn btn-outline-light" (click)="onPageChange(totalPaginas())" [disabled]="paginaActual === totalPaginas()">Última</button>
      </div>
    </div>
  </section>



</div>



<!-- Contenedor principal -->

